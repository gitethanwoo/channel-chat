#!/usr/bin/env node
/**
 * MCP server wrapper that loads environment from .env
 */

import { config } from 'dotenv';
import { dirname, join } from 'path';
import { fileURLToPath } from 'url';
import { existsSync } from 'fs';

const __dirname = dirname(fileURLToPath(import.meta.url));
const rootDir = join(__dirname, '..', '..');

// Load .env from project root
const envPath = join(rootDir, '.env');
if (existsSync(envPath)) {
  config({ path: envPath });
}

// Set Python path if not set
if (!process.env.PYTHON_PATH) {
  const venvPython = join(rootDir, '.venv', 'bin', 'python');
  if (existsSync(venvPython)) {
    process.env.PYTHON_PATH = venvPython;
  }
}

// Import and run the MCP server
import('../dist/mcp-server.js');
